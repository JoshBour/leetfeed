$(function(){var e=document.createElement("script");var t=$("body");e.src="https://www.youtube.com/iframe_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n);$("#mobileMenuToggle").on("click",function(){$("header nav").toggle()});var r="";$('img[class*="hoverable"]').on("mouseenter",function(){var e=$(this).attr("src");r=e;var t=getImageDetails(e);$(this).attr("src",baseUrl+"/images/"+t[0]+"-hover."+t[1])}).on("mouseleave",function(){$(this).attr("src",r);r=""});$(document).on("submit","#summonerForm",function(){var e=$(this);var t=e.parent();t.toggleLoadingImage();e.ajaxSubmit({target:"#summonerForm",success:function(n){if(n.redirect){window.location.href=e.attr("action")}t.toggleLoadingImage()},type:"post"});return false});$(document).on("mouseenter mouseleave",".verticalFeedList li",function(){var e=$(this);e.children(".feedMeta").slideToggle("fast")});$(".summonerMeta").on("click",function(){if(confirm("Do you really want to remove the summoner from your account?")){var e=$(this).closest("li");$.ajax({url:baseUrl+"/account/remove-summoner",type:"POST",data:{summonerId:e.attr("class").substr(9)}}).success(function(t){if(t.success==1){var n=e.parent();if(n.children().length==1){n.replaceWith($("<div/>",{"class":"empty",text:"You haven't added a League of Legends account yet! Add one using the button on the right."}))}e.detach()}addMessage(t.message)}).error(function(){addMessage("Something with wrong, please try again.")})}});$("#addSummonerToggle").on("click",function(){var e=$("#addSummoner");e.addClass("hideAfter").show().focusLight();i=e});$("#announcement .remove").on("click",function(){var e=$(this).parent();var t=e.attr("data-scope");e.detach();createCookie(t,"true",5)});$(".moduleSort select").on("change",function(){var e=$(this);window.location.href=e.val()});if($("#main .module").attr("id")=="random"){$.ajax({url:baseUrl+"/feed/get-random-feed"}).success(function(e){console.log(e);window.location.href=baseUrl+"/feed/"+e.feedId}).error(function(e,t){console.log(t);window.location.href=baseUrl+"/random"})}$(document).on("click",".openInWindow",function(){var e=$(this).attr("href");var t="popUp";var n="width=650,height=400,scrollbars=yes";window.open(e,t,n);event.preventDefault()});var i="";var s=$("#flash");if(s.is(":visible")){s.setRemoveTimeout(5e3)}if(isMobile&&t.hasClass("feedPage")){$("#uploaded").after($("#share"))}if(!isMobile){var o=[];var u=1e3,a;$(document).on("mouseenter",".verticalFeedList li .feedThumbnail",function(){var e=$(this);a=setTimeout(function(){var t=e.closest("li");var n=t.attr("data-video-id");var r=t.attr("class").substr(5);var i=e.children("a").find("img");i.hide();if(!o["preview-"+r]){var s=new YT.Player("preview-"+r,{height:"257",width:"365",videoId:n,playerVars:{controls:0,loop:1,modestbranding:0,showinfo:0,autohide:1,wmode:"transparent",html5:1,enablejsapi:1},events:{onReady:function(e){e.target.mute();e.target.playVideo()}}});o["preview-"+r]=s}else{var u=$("#preview-"+r);if(!u.is("visible")){u.show();o["preview-"+r].playVideo()}}},u)});$(document).on("mouseleave",".verticalFeedList li .feedThumbnail",function(){clearTimeout(a);var e=$(this);var t=e.closest("li");var n=t.attr("class").substr(5);var r=o["preview-"+n];if(r){r.pauseVideo()}})}$("#commentList").perfectScrollbar({wheelSpeed:50});var f=$("#addComment");f.on("keyup",function(){var e=$(this);var t=e.val();var n=e.parent().find("#remainingChars .number");if(t.length>150){n.addClass("redFont")}else{n.removeClass("redFont");n.html(150-t.length)}});f.pressEnter(function(){var e=$(this);var t=e.val();if(t.length<=150){var n=$("#feed").attr("class").substr(5);$.ajax({url:baseUrl+"/comment/add",type:"POST",data:{feedId:n,content:t},dataType:"html"}).success(function(t){if(!isEmpty(t)){var n=$(".emptyComments");if(n.length!=0){n.replaceWith($("<ul/>",{id:"commentList",html:t}).perfectScrollbar({wheelSpeed:50}))}else{$("#commentList").append(t).perfectScrollbar("update")}e.val("");e.parent().find("#remainingChars .number").html(150)}})}});if(t.hasClass("mainPage")){var l=false;$(window).on("scroll",function(){if(document.body.scrollHeight-$(this).scrollTop()<=$(this).height()){if(!l){var e=$("#top-feeds");var t=e.attr("id");var n=parseInt(e.attr("data-page"))+1;var r=e.attr("data-total");if(n-1>=r){var i=e.children(".limit-reached");if(i.length==0){i=$("<li />",{"class":"limit-reached",text:"There are no more feeds available."}).appendTo(e)}}else{l=true;e.toggleLoadingImage();$.ajax({url:baseUrl+"/get-more-feeds/"+t+"/"+n,dataType:"html"}).success(function(t){l=false;e.append(t).perfectScrollbar("update").toggleLoadingImage()});e.attr("data-page",n)}}}})}$(".module ul.expandable").on("scroll",function(e){var t=$(this);if(t.scrollTop()===t.prop("scrollHeight")-t.height()){}});if(t.hasClass("famousPage")){var l=false;$(window).on("scroll",function(){if(document.body.scrollHeight-$(this).scrollTop()<=$(this).height()){if(!l){l=true;var e=$("#youtubersFeeds");var t=e.attr("data-token");if(t!="finished"){var n=$("#youtubers li.active span").attr("class").substr(9);e.toggleLoadingImage();$.ajax({url:baseUrl+"/feed/get-youtuber-feeds/"+n+"/false/"+t,timeout:2e4}).success(function(r){var i=r.nextToken==null?"finished":r.nextToken;e.attr("data-token",i);$.ajax({url:baseUrl+"/feed/get-youtuber-feeds/"+n+"/return/"+t,timeout:2e4}).success(function(t){e.append(t);e.toggleLoadingImage();l=false}).error(function(e,t){console.log(t)})}).error(function(e,t){console.log(t)})}}}})}var c=false;$("#youtubers li").on("click",function(){var e=$(this);delay(function(){if(e.hasClass("active")||c)return;c=true;e.addClass("active");e.siblings(".active").removeClass("active");var t=$("#youtubersFeeds");var n=t.parent();var r=e.find('span[class^="youtuber"]');var i=r.attr("class").substring(9);t.slideUp();n.toggleLoadingImage();$.ajax({url:baseUrl+"/feed/get-youtuber-feeds/"+i,timeout:2e4}).success(function(e){var s=e.nextToken==null?"finished":e.nextToken;t.attr("data-token",s);$.ajax({url:baseUrl+"/feed/get-youtuber-feeds/"+i+"/return",timeout:2e4}).success(function(e){t.find("li").detach();t.prepend(e).slideDown();t.parent().siblings("h1").html(r.html()+"'s Latest Feeds");n.toggleLoadingImage();c=false;t.perfectScrollbar("update")}).error(function(e,t){console.log(t)})}).error(function(e,t){console.log(t)})},150)});$(".hideToggle").on("click",function(){var e=$(this);var t=e.siblings(".moduleBody");if(t.is(":visible")){t.slideUp();e.html("Show")}else{t.slideDown();e.html("Hide")}});$(document).on("click",function(e){if(e.target.id=="shadow"){i.unfocusLight();$("body").removeClass("unscrollable");if(i.attr("id")=="stage"){i.find("iframe").detach();i.hide()}else if(i.hasClass("hideAfter")){i.hide()}else{i.detach()}}});$(document).on("click",".feedRating a",function(e){var t=$(this);if(t.attr("href")=="#"){e.preventDefault()}else{return}var n=t.siblings('a[class^="thumb"]');if(!t.hasClass("disabled")){var r=t.attr("class");var i=t.parent().hasClass("embed")?t.closest("li"):$("#feed");var s=i.attr("class").substring(5);t.addClass("disabled");$.ajax({url:baseUrl+"/feed/rate/"+r+"/id/"+s,timeout:5e3}).success(function(e){if(e.success==1){var t=i.find(".count");var s=parseInt(t.html());if(n.hasClass("disabled")){n.removeClass("disabled");s+=r=="thumbUp"?2:-2}else{s+=r=="thumbUp"?1:-1}t.html(s)}else{addMessage(e.message)}})}});$(document).on("click",".verticalFeedList li .videoMask",function(e){if(!isMobile){e.preventDefault();e.stopPropagation();var t=$(this).parent();var n=t.closest("li");var r=n.attr("data-video-id");var s=n.attr("class").substr(5);toggleVideo("hide");var o=$("<div/>",{id:"stageWrapper"}).prependTo($("body"));var u=$("<div/>",{id:"stage"}).appendTo(o);var a=$("<div/>",{id:"videoWrapper"}).appendTo(u);var f=$("<iframe/>",{id:"youtubeVideo",frameborder:0,src:"http://www.youtube.com/embed/"+r+"?autoplay=1"}).appendTo(a);i=o;o.addClass("target-"+r).focusLight();$("body").addClass("unscrollable");$.ajax({url:baseUrl+"/feed/add-to-watched/"+s,timeout:5e3}).success(function(e){if(e.success!=1){if(e.message!="")console.log(e.message)}})}else{var l=$(this).siblings("a");window.location.href=l.attr("href")}})})