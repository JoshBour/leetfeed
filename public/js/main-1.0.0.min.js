$(function(){$(".openInWindow").on("click",function(e){var t=$(this).attr("href");var n="popUp";var r="width=650,height=400,scrollbars=yes";window.open(t,n,r);event.preventDefault()});var e="";var t=$("#flash");if(t.is(":visible")){t.setRemoveTimeout(5e3)}$(".verticalFeedList").each(function(e){$(this).perfectScrollbar({wheelSpeed:50})});$("#youtubers").perfectScrollbar({wheelSpeed:50,suppressScrollY:true});var n=false;$(".module ul.expandable").on("scroll",function(e){var t=$(this);if(t.scrollTop()===t.prop("scrollHeight")-t.height()){if(!n){n=true;var r=t.attr("id");var i=parseInt(t.attr("data-page"))+1;var s=t.attr("data-total");if(i-1>=s){var o=t.children(".limit-reached");if(o.length!=0){alert("here");console.log(o);return}else{o=$("<li />",{"class":"limit-reached",text:"There are no more feeds available."}).appendTo(t)}}else{t.toggleLoadingImage();$.ajax({url:baseUrl+"/get-more-feeds/"+r+"/"+i,dataType:"html"}).success(function(e){n=false;t.append(e).perfectScrollbar("update").toggleLoadingImage()});t.attr("data-page",i)}}}});var r=false;$("#youtubers li").on("click",function(e){var t=$(this);delay(function(){if(t.hasClass("active")||r)return;r=true;t.addClass("active");t.siblings(".active").removeClass("active");var e=$("#youtubersFeeds");var n=e.parent();var i=t.find('span[class^="youtuber"]');var s=i.attr("class").substring(9);e.slideUp();n.toggleLoadingImage();$.ajax({url:baseUrl+"/get-youtuber-feeds/"+s,timeout:5e3}).done(function(t){e.html("").append(t).slideDown();e.siblings("h1").html(i.html()+"'s Latest Feeds");n.toggleLoadingImage();r=false;e.perfectScrollbar("destroy");e.perfectScrollbar()}).fail(function(e,t){if(t=="timeout"){alert("The search has timed out, please try again.")}else{addMessage("Something with wrong with the game search, please try again.")}})},150)});$(".hideToggle").on("click",function(e){var t=$(this);var n=t.siblings("ul");console.log(n);if(n.is(":visible")){n.slideUp();t.html("Show")}else{n.slideDown();t.html("Hide")}});$(document).on("click",function(t){if(t.target.id=="shadow"){e.unfocusLight();$("body").removeClass("unscrollable");if(e.attr("id")=="stage"){e.find("iframe").detach();e.hide()}else{e.detach()}}});$(document).on("click","#rating a",function(e){e.preventDefault();var t=$(this);var n=t.siblings('a[id^="thumb"]');if(!t.hasClass("disabled")){t.addClass("disabled");var r=t.attr("id");var i=$("#feed");var s=i.attr("class").substring(5);$.ajax({url:baseUrl+"/feed/rate/"+r+"/id/"+s,timeout:5e3}).success(function(e){if(e.success==1){var t=$("#total .count");var i=parseInt(t.html());if(n.hasClass("disabled")){n.removeClass("disabled");i+=r=="thumbUp"?2:-2}else{i+=r=="thumbUp"?1:-1}t.html(i)}else{addMessage(e.message)}})}})})